jQuery(document).ready(function(g){var h=g("#mailster_nonce").val(),n=g(".start-test"),e=g(".tests-output"),b=g(".tests-textoutput"),d=g(".tests-wrap"),f=g(".test-info"),c=g("#progress"),i=c.find(".bar"),a=g("#outputnav"),o=g(".subtab"),p,k;g("a.external").on("click",function(){if(this.href){window.open(this.href)}return false});n.on("click",function(){n.hide();c.show();e.empty();b.val(b.data("pretext"));k=1;l();p={error:0,warning:0,notice:0,success:0};return false});e.on("click","a",function(){if(this.href){window.open(this.href)}return false});d.on("change","input",function(){(g(this).is(":checked"))?d.removeClass("no-"+g(this).data("type")):d.addClass("no-"+g(this).data("type"))});a.on("click","a.nav-tab",function(){a.find("a").removeClass("nav-tab-active");o.hide();var r=g(this).addClass("nav-tab-active").attr("href");location.hash=r;g("#subtab-"+r.substr(1)).show();if(r=="#systeminfo"){var q=g("#system_info_content");if(g.trim(q.val())){return}q.val("...");j("get_system_info",function(s){if(s.log&&console){console.log(s.log)}q.val(s.msg)})}return false});if(/autostart/.test(location.search)){n.trigger("click")}else{(location.hash&&a.find('a[href="'+location.hash+'"]').length)?a.find('a[href="'+location.hash+'"]').trigger("click"):a.find("a").eq(0).trigger("click")}function l(q){j("test",{test_id:q},function(r){p.error+=r.errors.error;p.warning+=r.errors.warning;p.notice+=r.errors.notice;p.success+=r.errors.success;g(r.message.html).appendTo(e);b.val(b.val()+r.message.text);if(r.nexttest){i.width(((++k)/r.total*100)+"%");f.html(m(mailsterL10n.running_test,k,r.total,r.current))}else{i.width("100%");setTimeout(function(){n.html(mailsterL10n.restart_test).show();c.hide();i.width(0);f.html(m(mailsterL10n.tests_finished,p.error,p.warning,p.notice))},500)}if(r.nexttest){setTimeout(function(){l(r.nexttest)},100)}else{}},function(r,t,s){})}function m(){var q=Array.prototype.slice.call(arguments),u=q.shift(),t=q.length,s;for(var r=0;r<t;r++){s=new RegExp("%("+(r+1)+"\\$)?(s|d|f)");u=u.replace(s,q[r])}return u}function j(s,r,t,q){if(g.isFunction(r)){if(g.isFunction(t)){q=t}t=r;r={}}g.ajax({type:"POST",url:ajaxurl,data:g.extend({action:"mailster_"+s,_wpnonce:h},r),success:function(v,w,u){t&&t.call(this,v,w,u)},error:function(u,w,v){if(w=="error"&&!v){return}if(console){console.error(g.trim(u.responseText))}q&&q.call(this,u,w,v)},dataType:"JSON"})}});